# Learning H2, JPA and Hibernate in Spring Boot

- **H2**: In Memory Database
- **JPA**: Java/Jakarta Persistent API
- **Hibernate**: ORM (Object Relation Mapper) for Spring Boot

## Enabling the H2 Console

To enable the H2 In-Memory Database, `http://localhost:8080/h2-console`, we would need to add this line in the `application.properties` file:

```properties
spring.h2.console.enabled=true
```

> The database url will be dynamically generated each time the application starts.

### Static H2 URL

To get a static URL for H2, we would need to add this line into `application.properties`

```properties
spring.datasource.url=jdbc:h2:mem:<url_name>

#Example
spring.datasource.url=jdbc:h2:mem:testdb
```

> This way, the url will always be `spring.datasource.url=jdbc:h2:mem:testdb` when you restart your application.

### Next Step

Creating a `schema.sql` file in the same folder as `application.properties`.

### Using Spring to communicate with Database

We would have 2 files:

- A `@Repository` file and a `@Component` file

- `Example` - `@Repository` file - `CourseJdbcRepo.java`:

```Java
@Repository
public class CourseJdbcRepo {

    @Autowired
    private JdbcTemplate springJdbc;

    private static String INSERT_QUERY = """
            insert into course (id, name, author)
            values(1, 'Learn Discrete Math', 'Karin');
            """;

    public void insert(){
        springJdbc.update(INSERT_QUERY);
    }
}
```

> Methods in this Class file would use methods to directly communicate with the database.

- `Example` - `@Repository` file - `CourseJdbcRepo.java`:

```Java
@Component
public class CourseJdbcCommandLineRunnner implements CommandLineRunner{
    @Autowired
    private CourseJdbcRepo repository;

    @Override
    public void run(String... args) throws Exception {
        repository.insert();
    }
}
```

> Methods in this Class will `implements CommandLineRunner`. This interface, `CommandLineRunner`, have a `run` method which is to execute the `run` method upon launching the application. *Do also remember to do a `@ComponentScan` for Spring to identify the packages that needed to be scanned during runtime.*
