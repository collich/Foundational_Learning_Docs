# Spring Framework Advanced Features

## Initialisation

During runtime, the default initilisation of a `Bean/Component` is `Eager`. This means that regardless of whether the `Bean/Component` is being used or not, it is being initialised during **startup**. To defer the component from being initilised, we can place the `@Lazy` annotation.

```Java
@Component
@Lazy // Use this annotation.
public class ClassB{
    // Some code
}

@Configuration
public class SomeApp{
    public static void main(String[] args){
        try(var context = new AnnotationConfigApplicationContext(SomeApp.class)){
            // The Bean will initialise at this point after AnnotationConfigApplicationContext
            context.getBean(ClassB.class);
        }
    }
}
```

> Only when we're using `ClassB`, it will then be initialised. It can be used on any `@Component` or `@Bean`

- Default initialization for Spring Beans: **Eager**.
- **Eager** initialisation is recommended:
  - Errors in the configuration are discovered immediately at application startup.
- However you can configure beans to be lazily initialised using `Lazy` annotation:
  - **Not recommended** (`AND`) **Not frequently used**.
- `Lazy` annotation:
  - Can be used almost everywhere `@Component` and `@Bean` are used.
  - Lazy-resolution proxy will be injected instead of actual dependency.
  - Can be used on Configuration (@Configuration) class.

## Eager vs Lazy Initialisation

|Heading|Lazy|Eager|
|--|--|--|
|Initialisation Time|Bean initialisaed when it is first made use of in the application|Bean initialisaed at startup of the application|
|Default|NOT Default|Default|
|Code Snippet|@Lazy OR @Lazy(value=true)|@Lazy(value=false) OR (Absence of @Lazy)|
|What happens if there are errors in initialising|Errors will result in `RunTimeException`|Errors will prevent application from starting up|
|Usage|Rarely Used|Very frequently used|
|Memory Consumption|Less(until bean is initialised)|All beans are initialised at startup|
|Recommended Scenario|Beans very rarely used in your app|Most of your beans|
